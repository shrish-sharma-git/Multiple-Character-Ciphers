<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caesar Cipher</title>
    <!-- CSS -->
    <link rel="stylesheet" href="../style.css">    
</head>
<body>
     <!-- Navbar -->
     <div class="navbar">
        <a href="../index.html"><h2>Multiple Character Ciphers</h2></a>
        <a href="https://en.wikipedia.org/wiki/Caesar_cipher"><h2>About Cipher</h2></a>
    </div>

    <!-- Main Content -->
    <div class="content">
        <div class="header">
            <h1>Caesar Cipher</h1>
        </div>
        <div class="form-container">
            <form id="submitForm">
                <div class="container">
                    <label for="plainText"><b>Enter The Message :</b></label>
                    <input type="text" id="plainText" placeholder="Enter Plain Text" name="plainText" required>
                    <label for="key"><b>Enter Key (Number of Shifts) :</b></label>
                    <input type="number" id="key" placeholder="Enter Key" name="key" required>
                </div>
                <button class="btn-grad btn-encrypt" onclick="caesarCipher()" type="submit">Emcrypt !</button>
            </form>
        </div>
        <div class="output" id="output" style="text-align: center; font-size: 30px; margin-top: 15px;">

        </div>
    
    </div>
</body>
<script>
    //preventing default
    var form = document.getElementById("submitForm");
    function handleForm(e) { e.preventDefault(); } 
    form.addEventListener('submit', handleForm);

    // main function
    function caesarCipher() {
        var plainText = document.getElementById('plainText').value;
        var key = document.getElementById('key').value;

        console.log(plainText, key);

        if(plainText.length == 0) {
            alert("Field cannpt be empty");
            return;
        }

        key = parseInt(key, 10);

        if(key < 0 || key >= 26){
			alert("Key is out of range(Range is from 0-26)");
			return;
        }

        else {
            var output = caesarShift(plainText, key);

            var op = document.getElementById('output').innerHTML = "Encrypted Text is : " + output;
        }
    }    

    function caesarShift(plainText, key) {
        var cipherText = "";
        for(var i=0 ;i< plainText.length; i++) {
            var ch = plainText.charCodeAt(i);
				if(65 <= ch && ch <=  90) {
					cipherText += String.fromCharCode((ch - 65 + key) % 26 + 65); // for Uppercase Unicode
				} 
				else if(97 <= ch && ch <= 122){
					cipherText += String.fromCharCode((ch - 97 + key) % 26 + 97);  // for Lowercase Unicode
				}
				else{
					cipherText += text.charAt(i);
				}
		}
	return cipherText;
    }  
</script>
</html>